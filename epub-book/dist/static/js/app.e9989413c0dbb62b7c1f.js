webpackJsonp([1],{0:function(t,e){},1:function(t,e){},"4/se":function(t,e,i){"use strict";var n={props:{ifShowContent:Boolean,navigation:Object,bookAvailable:{type:Boolean,default:!1}},methods:{jumpTo:function(t){this.$emit("jumpTo",t)}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-right"}},[i("div",{staticClass:"content"},[t.bookAvailable?i("div",{staticClass:"content-wrapper"},t._l(t.navigation.toc,function(e,n){return i("div",{key:n,staticClass:"content-item",on:{click:function(i){return t.jumpTo(e.href)}}},[i("span",{staticClass:"text"},[t._v(t._s(e.label))])])}),0):i("div",{staticClass:"empty"},[t._v("加载中.....")])])])},staticRenderFns:[]};var o={components:{ContentView:i("C7Lr")(n,s,!1,function(t){i("7KiU")},"data-v-a455913e",null).exports},props:{ifTitleAndMenuShow:{type:Boolean,default:!1},fontSizeList:Array,defaultFontSize:Number,themeList:Array,defaultTheme:Number,bookAvailable:{type:Boolean,default:!1},navigation:Object},data:function(){return{ifSettingShow:!1,lineWidth:0,showTag:0,progress:0,ifShowContent:!1}},methods:{hideContent:function(){this.ifShowContent=!1},jumpTo:function(t){this.$emit("jumpTo",t)},setTheme:function(t){this.$emit("setTheme",t)},setFontSize:function(t){this.$emit("setFontSize",t)},setProcess:function(){this.$emit("setProcess")},showSetting:function(t){this.showTag=t,3===this.showTag?(this.ifSettingShow=!1,this.ifShowContent=!0):(this.ifSettingShow=!0,this.setProcess())},hideSetting:function(){this.ifSettingShow=!1},onProgressInput:function(t){this.progress=t,this.$refs.progress.style.backgroundSize=this.progress+"% 100%"},onProgressChange:function(t){this.$emit("onProgressChange",t)}},mounted:function(){},updated:function(){this.lineWidth=this.$refs.line[0].getBoundingClientRect().width,console.log(this.$refs.line[0].getBoundingClientRect())}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu-bar"},[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.ifTitleAndMenuShow,expression:"ifTitleAndMenuShow"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":t.ifSettingShow||!t.ifTitleAndMenuShow}},[i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont icon-mulu",on:{click:function(e){return t.showSetting(3)}}})]),t._v(" "),i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont icon-progress_icon",on:{click:function(e){return t.showSetting(2)}}})]),t._v(" "),i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont icon-liangdu",on:{click:function(e){return t.showSetting(1)}}})]),t._v(" "),i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont icon-ziti",on:{click:function(e){return t.showSetting(0)}}})])])]),t._v(" "),i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.ifSettingShow,expression:"ifSettingShow"}],staticClass:"setting-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.showTag,expression:"showTag === 0"}],staticClass:"setting-font-size"},[i("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px",left:t.lineWidth/2+"px"}},[t._v("A")]),t._v(" "),i("div",{staticClass:"select"},t._l(t.fontSizeList,function(e,n){return i("div",{key:n,staticClass:"select-wrapper",on:{click:function(i){return t.setFontSize(e.fontSize)}}},[i("div",{ref:"line",refInFor:!0,staticClass:"line"}),t._v(" "),i("div",{staticClass:"point-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[i("div",{staticClass:"small-point"})])]),t._v(" "),i("div",{staticClass:"line"})])}),0),t._v(" "),i("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px",left:-t.lineWidth/2+"px"}},[t._v("A")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.showTag,expression:"showTag === 1"}],staticClass:"setting-theme"},t._l(t.themeList,function(e,n){return i("div",{key:n,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(n)}}},[i("div",{staticClass:"preview",class:{border:"#fff"===e.style.body.background},style:{background:e.style.body.background}}),t._v(" "),i("div",{staticClass:"text",class:{selected:n===t.defaultTheme}},[t._v(t._s(e.name))])])}),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.showTag,expression:"showTag === 2"}],staticClass:"setting-progress"},[i("div",{staticClass:"progress-wrapper"},[i("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}})]),t._v(" "),i("div",{staticClass:"text-wrapper"},[i("span",[t._v(t._s(t.bookAvailable?t.progress+"%":"加载中....."))])])])])]),t._v(" "),i("ContentView",{directives:[{name:"show",rawName:"v-show",value:t.ifShowContent,expression:"ifShowContent"}],attrs:{ifShowContent:t.ifShowContent,navigation:t.navigation,bookAvailable:t.bookAvailable},on:{jumpTo:t.jumpTo}}),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.ifShowContent,expression:"ifShowContent"}],staticClass:"content-mask",on:{click:t.hideContent}})])],1)},staticRenderFns:[]};var r=i("C7Lr")(o,a,!1,function(t){i("pnKo")},"data-v-0ca97d7c",null);e.a=r.exports},"7KiU":function(t,e){},CKLs:function(t,e){},G1q7:function(t,e){},K2Pk:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("KQ6f");document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("html"),e=window.innerWidth/10;e=e>50?50:e,t.style.fontSize=e+"px"});var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=i("C7Lr")({name:"App"},s,!1,function(t){i("wFJm")},null,null).exports,a=i("KGCO"),r=i("zYdk"),c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook"},[i("TitleBar",{attrs:{ifTitleAndMenuShow:t.ifTitleAndMenuShow}}),t._v(" "),i("div",{staticClass:"read-wrapper"},[i("div",{attrs:{id:"read"}}),t._v(" "),i("div",{staticClass:"mask"},[i("div",{staticClass:"left",on:{click:t.prevPage}}),t._v(" "),i("div",{staticClass:"center",on:{click:t.toggleTitleAndMenu}}),t._v(" "),i("div",{staticClass:"right",on:{click:t.nextPage}})])]),t._v(" "),i("MenuBar",{ref:"MenuBar",attrs:{ifTitleAndMenuShow:t.ifTitleAndMenuShow,fontSizeList:t.fontSizeList,defaultFontSize:t.defaultFontSize,themeList:t.themeList,defaultTheme:t.defaultTheme,bookAvailable:t.bookAvailable,navigation:t.navigation},on:{setFontSize:t.setFontSize,setTheme:t.setTheme,onProgressChange:t.onProgressChange,jumpTo:t.jumpTo,setProcess:t.setProcess}})],1)},staticRenderFns:[]};var l=function(t){i("K2Pk")},h=i("C7Lr")(r.a,c,!1,l,"data-v-77e3ced2",null).exports;n.a.use(a.a);var u=new a.a({routes:[{path:"/",redirect:"/ebook"},{path:"/ebook",component:h}]});i("G1q7");n.a.config.productionTip=!1,new n.a({el:"#app",router:u,components:{App:o},template:"<App/>"})},pnKo:function(t,e){},tdlb:function(t,e,i){"use strict";var n={props:{ifTitleAndMenuShow:{type:Boolean,default:!1}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"slide-down"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.ifTitleAndMenuShow,expression:"ifTitleAndMenuShow"}],staticClass:"title-wrapper"},[e("div",{staticClass:"left"},[e("i",{staticClass:"icon iconfont icon-Group"})]),this._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"icon-wrapper"},[e("i",{staticClass:"icon iconfont icon-ionc--"})]),this._v(" "),e("div",{staticClass:"icon-wrapper"},[e("i",{staticClass:"icon iconfont icon-cart"})]),this._v(" "),e("div",{staticClass:"icon-wrapper"},[e("i",{staticClass:"icon iconfont icon-moreread"})])])])])},staticRenderFns:[]};var o=i("C7Lr")(n,s,!1,function(t){i("CKLs")},"data-v-529c41d7",null);e.a=o.exports},wFJm:function(t,e){},zYdk:function(t,e,i){"use strict";(function(t){var n=i("oZgS"),s=i("tdlb"),o=i("4/se");t.epub=n.a,e.a={data:function(){return{ifTitleAndMenuShow:!1,fontSizeList:[{fontSize:12},{fontSize:14},{fontSize:16},{fontSize:18},{fontSize:20},{fontSize:22},{fontSize:24}],defaultFontSize:16,themeList:[{name:"default",style:{body:{color:"#000",background:"#fff"}}},{name:"eye",style:{body:{color:"#000",background:"#ceeaba"}}},{name:"night",style:{body:{color:"#ccc",background:"#000"}}},{name:"gold",style:{body:{color:"#000",background:"rgb(241, 236, 226)"}}}],defaultTheme:0,bookAvailable:!1,navigation:{}}},components:{TitleBar:s.a,MenuBar:o.a},methods:{showEpub:function(){var t=this;this.book=new n.a("./static/中国人史纲.epub"),this.rendition=this.book.renderTo("read",{width:window.innerWidth,height:window.innerHeight}),this.rendition.display(),this.themes=this.rendition.themes,this.setFontSize(this.defaultFontSize),this.registerTheme(),this.setTheme(this.defaultTheme),this.book.ready.then(function(){return t.navigation=t.book.navigation,console.log(t.navigation),t.book.locations.generate()}).then(function(e){t.locations=t.book.locations,console.log(t.locations),t.bookAvailable=!0})},prevPage:function(){this.rendition&&this.bookAvailable&&this.rendition.prev().then(function(){}),this.ifTitleAndMenuShow=!1,this.$refs.MenuBar.hideSetting()},nextPage:function(){this.rendition&&this.bookAvailable&&this.rendition.next().then(function(){}),this.ifTitleAndMenuShow=!1,this.$refs.MenuBar.hideSetting()},toggleTitleAndMenu:function(){this.ifTitleAndMenuShow=!this.ifTitleAndMenuShow,this.ifTitleAndMenuShow||this.$refs.MenuBar.hideSetting()},hideTitleAndMenu:function(){this.ifTitleAndMenuShow=!1,this.$refs.MenuBar.hideSetting(),this.$refs.MenuBar.hideContent()},setFontSize:function(t){this.defaultFontSize=t,this.themes&&this.themes.fontSize(t+"px")},registerTheme:function(){var t=this;this.themeList.forEach(function(e){t.themes.register(e.name,e.style)})},setTheme:function(t){this.themes.select(this.themeList[t].name),this.defaultTheme=t},onProgressChange:function(t){var e=t/100,i=e>0?this.locations.cfiFromPercentage(e):0;console.log(i),this.rendition.display(i)},jumpTo:function(t){this.rendition.display(t),this.hideTitleAndMenu()},setProcess:function(){if(this.bookAvailable){var t=this.rendition.currentLocation(),e=this.locations.percentageFromCfi(t.start.cfi);this.$refs.MenuBar.progress=Math.round(100*e),this.$refs.MenuBar.onProgressInput(this.$refs.MenuBar.progress)}}},mounted:function(){this.showEpub()}}}).call(e,i("9AUj"))}},["NHnr"]);
//# sourceMappingURL=app.e9989413c0dbb62b7c1f.js.map